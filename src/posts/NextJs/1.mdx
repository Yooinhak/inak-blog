---
title: "Next.js에 Google Analytics(GA4) 추가하기"
date: 2024-04-05
---

<Callout type="info"> Next.js App Router 기반으로 작성되었습니다. </Callout>

## 웹사이트 통계가 왜 중요할까?

아무리 멋진 블로그나 웹앱이라도, 누가 언제 얼마나 방문하는지 모르면 방향을 잡기 어렵습니다.  
그래서 구글 애널리틱스(GA4)를 붙여 방문자 통계를 수집해보겠습니다.

## GA4 Property 생성

먼저 [GA4 콘솔](https://analytics.google.com/)에서 새 Property를 만들고, `측정 ID`를 복사해둡니다.  
(예: `G-XXXXXXXXXX`)

## Next.js에 GA4 스크립트 추가하기

`app/layout.tsx` 파일에 다음과 같이 GA 스크립트를 삽입합니다.

```tsx
export const metadata: Metadata = {
  title: '이낙 블로그',
  description: '프론트엔드 개발 블로그',
  openGraph: { /* 생략 */ },
};

export default function RootLayout({ children }) {
  return (
    <html lang="ko">
      <head>
        <script
          async
          src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"
        />
        <script
          dangerouslySetInnerHTML={{
            __html: `
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'G-XXXXXXX');
            `,
          }}
        />
      </head>
      <body>{children}</body>
    </html>
  );
}